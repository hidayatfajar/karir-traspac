import{m as e,a as t,v as a,w as s}from"./DnCr5V3S.js";import{e as n,a4 as o,aa as l,n as i,d as r,c as u,al as d,a as v,o as c,w as y,r as f,u as p,a8 as b,P as m,j as E,aE as w,ag as O,aH as h}from"./UvJT4o6g.js";function D(e,t,a){const s=a.originalEvent.target,n=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});t&&s.addEventListener(e,t,{once:!0}),s.dispatchEvent(n)}function P(e,t){const a=t.closest("[data-dismissable-layer]"),s=""===e.dataset.dismissableLayer?e:e.querySelector("[data-dismissable-layer]"),n=Array.from(e.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!(!a||!(s===a||n.indexOf(s)<n.indexOf(a)))}const g=d({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),C=r({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(s,{emit:r}){const d=s,E=r,{forwardRef:w,currentElement:O}=t(),h=u(()=>{var e;return(null==(e=O.value)?void 0:e.ownerDocument)??globalThis.document}),C=u(()=>g.layersRoot),L=u(()=>O.value?Array.from(C.value).indexOf(O.value):-1),B=u(()=>g.layersWithOutsidePointerEventsDisabled.size>0),T=u(()=>{const e=Array.from(C.value),[t]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),a=e.indexOf(t);return L.value>=a}),W=function(t,a,s=!0){var i;const r=(null==(i=null==a?void 0:a.value)?void 0:i.ownerDocument)??(null==globalThis?void 0:globalThis.document),u=n(!1),d=n(()=>{});return o(n=>{if(!e||!l(s))return;const o=async e=>{const s=e.target;if((null==a?void 0:a.value)&&s)if(P(a.value,s))u.value=!1;else{if(e.target&&!u.value){let a=function(){D("dismissableLayer.pointerDownOutside",t,s)};const s={originalEvent:e};"touch"===e.pointerType?(r.removeEventListener("click",d.value),d.value=a,r.addEventListener("click",d.value,{once:!0})):a()}else r.removeEventListener("click",d.value);u.value=!1}},i=window.setTimeout(()=>{r.addEventListener("pointerdown",o)},0);n(()=>{window.clearTimeout(i),r.removeEventListener("pointerdown",o),r.removeEventListener("click",d.value)})}),{onPointerDownCapture:()=>{l(s)&&(u.value=!0)}}}(async e=>{const t=[...g.branches].some(t=>null==t?void 0:t.contains(e.target));T.value&&!t&&(E("pointerDownOutside",e),E("interactOutside",e),await i(),e.defaultPrevented||E("dismiss"))},O),x=function(t,a,s=!0){var r;const u=(null==(r=null==a?void 0:a.value)?void 0:r.ownerDocument)??(null==globalThis?void 0:globalThis.document),d=n(!1);return o(n=>{if(!e||!l(s))return;const o=async e=>{if(!(null==a?void 0:a.value))return;await i(),await i();const s=e.target;a.value&&s&&!P(a.value,s)&&e.target&&!d.value&&D("dismissableLayer.focusOutside",t,{originalEvent:e})};u.addEventListener("focusin",o),n(()=>u.removeEventListener("focusin",o))}),{onFocusCapture:()=>{l(s)&&(d.value=!0)},onBlurCapture:()=>{l(s)&&(d.value=!1)}}}(e=>{[...g.branches].some(t=>null==t?void 0:t.contains(e.target))||(E("focusOutside",e),E("interactOutside",e),e.defaultPrevented||E("dismiss"))},O);let S;return a("Escape",e=>{L.value===C.value.size-1&&(E("escapeKeyDown",e),e.defaultPrevented||E("dismiss"))}),o(e=>{O.value&&(d.disableOutsidePointerEvents&&(0===g.layersWithOutsidePointerEventsDisabled.size&&(S=h.value.body.style.pointerEvents,h.value.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(O.value)),C.value.add(O.value),e(()=>{d.disableOutsidePointerEvents&&1===g.layersWithOutsidePointerEventsDisabled.size&&(h.value.body.style.pointerEvents=S)}))}),o(e=>{e(()=>{O.value&&(C.value.delete(O.value),g.layersWithOutsidePointerEventsDisabled.delete(O.value))})}),(e,t)=>(c(),v(p(m),{ref:p(w),"as-child":e.asChild,as:e.as,"data-dismissable-layer":"",style:b({pointerEvents:B.value?T.value?"auto":"none":void 0}),onFocusCapture:p(x).onFocusCapture,onBlurCapture:p(x).onBlurCapture,onPointerdownCapture:p(W).onPointerDownCapture},{default:y(()=>[f(e.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),L=r({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=s();return(e,a)=>p(t)||e.forceMount?(c(),v(w,{key:0,to:e.to,disabled:e.disabled,defer:e.defer},[f(e.$slots,"default")],8,["to","disabled","defer"])):E("",!0)}}),B=Symbol("nuxt-ui.portal-target");function T(e){const t=O(B,void 0),a=u(()=>"boolean"==typeof e.value||void 0===e.value?(null==t?void 0:t.value)??"body":e.value),s=u(()=>"boolean"==typeof e.value&&!e.value);return h(B,u(()=>a.value)),u(()=>({to:a.value,disabled:s.value}))}export{C as _,L as a,D as h,T as u};
