import{c as e,a as t}from"./DUW1bDgd.js";import{u as a}from"./YeO8wRkz.js";import{f as o,E as n,a as r}from"./D3Zd9nM9.js";import{u as s}from"./BjTnBUbK.js";import{y as u,Z as i,d as l,e as d,f as c,g as p,p as f,v,P as m,m as b}from"./BUKko-Vg.js";const[I,S]=e("RovingFocusGroup"),T=u({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:u,emit:I}){const T=e,g=I,{loop:F,orientation:y,dir:h}=i(T),C=s(h),j=t(T,"currentTabStopId",g,{defaultValue:T.defaultCurrentTabStopId,passive:void 0===T.currentTabStopId}),B=l(!1),E=l(!1),_=l(0),{getItems:x,CollectionSlot:R}=a({isProvider:!0});function P(e){const t=!E.value;if(e.currentTarget&&e.target===e.currentTarget&&t&&!B.value){const t=new CustomEvent(n,r);if(e.currentTarget.dispatchEvent(t),g("entryFocus",t),!t.defaultPrevented){const e=x().map(e=>e.ref).filter(e=>""!==e.dataset.disabled),t=[e.find(e=>""===e.getAttribute("data-active")),e.find(e=>e.id===j.value),...e].filter(Boolean);o(t,T.preventScrollOnEntryFocus)}}E.value=!1}function w(){setTimeout(()=>{E.value=!1},1)}return u({getItems:x}),S({loop:F,dir:C,orientation:y,currentTabStopId:j,onItemFocus:e=>{j.value=e},onItemShiftTab:()=>{B.value=!0},onFocusableItemAdd:()=>{_.value++},onFocusableItemRemove:()=>{_.value--}}),(e,t)=>(c(),d(v(R),null,{default:p(()=>[f(v(m),{tabindex:B.value||0===_.value?-1:0,"data-orientation":v(y),as:e.as,"as-child":e.asChild,dir:v(C),style:{outline:"none"},onMousedown:t[0]||(t[0]=e=>E.value=!0),onMouseup:w,onFocus:P,onBlur:t[1]||(t[1]=e=>B.value=!1)},{default:p(()=>[b(e.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});export{T as _,I as i};
