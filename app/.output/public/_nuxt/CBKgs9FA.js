import{d as e,t as l,c as a,e as t,f as i,a as r,o as n,w as o,r as s,h as u,u as d,m as c,P as p,g as v,N as g,b as m,n as f,p as h,v as b,T as y,x,z as V,F as q,B,aF as z,A as k,k as _}from"./UvJT4o6g.js";import{c as w,a as F,u as N,d as I}from"./DnCr5V3S.js";import{_ as M}from"./pIYm8bBF.js";import{u as S}from"./6YJhDAct.js";import{u as A}from"./Dnau8eFb.js";import{u as E}from"./Cic7byI7.js";import{g as C}from"./_F_G4MiH.js";const[D,$]=w("PinInputRoot"),j=e({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{},defaultValue:{},placeholder:{default:""},mask:{type:Boolean},otp:{type:Boolean},type:{default:"text"},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","complete"],setup(e,{emit:v}){const g=e,m=v,{mask:f,otp:h,placeholder:b,type:y,disabled:x,dir:V}=l(g),{forwardRef:q}=F(),B=S(V),z=N(g,"modelValue",m,{defaultValue:g.defaultValue??[],passive:void 0===g.modelValue}),k=a(()=>Array.isArray(z.value)?[...z.value]:[]),_=t(new Set);const w=a(()=>"number"===g.type),I=a(()=>k.value.filter(e=>!!e||w.value&&0===e).length===_.value.size);return i(z,()=>{I.value&&m("complete",z.value)},{deep:!0}),$({modelValue:z,currentModelValue:k,mask:f,otp:h,placeholder:b,type:y,dir:B,disabled:x,isCompleted:I,inputElements:_,onInputElementChange:function(e){_.value.add(e)},isNumericMode:w}),(e,l)=>(n(),r(d(p),c(e.$attrs,{ref:d(q),dir:d(B),"data-complete":I.value?"":void 0,"data-disabled":d(x)?"":void 0}),{default:o(()=>[s(e.$slots,"default",{modelValue:d(z)}),u(M,{id:e.id,as:"input",feature:"focusable",tabindex:"-1",value:k.value.join(""),name:e.name??"",disabled:d(x),required:e.required,onFocus:l[0]||(l[0]=e=>{var l,a;return null==(a=null==(l=Array.from(_.value))?void 0:l[0])?void 0:a.focus()})},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),P=e({__name:"PinInputInput",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},setup(e){const l=e,t=D(),u=a(()=>Array.from(t.inputElements.value)),c=a(()=>t.currentModelValue.value[l.index]),h=a(()=>l.disabled||t.disabled.value),b=a(()=>t.otp.value),y=a(()=>t.mask.value),{primitiveElement:x,currentElement:V}=A();function q(){const e=V.value;f(()=>{e&&!e.value&&(e.placeholder=t.placeholder.value)})}function B(e){E(e,C(),void 0,{itemsArray:u.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:t.dir.value})}function z(e){e.preventDefault();if(e.target.value)I(l.index,"");else{const e=u.value[l.index-1];e&&(e.focus(),I(l.index-1,""))}}function k(e){"Delete"===e.key&&(e.preventDefault(),I(l.index,""))}function _(e){const l=e.target;l.setSelectionRange(1,1),l.value||(l.placeholder="")}function w(e){q()}function F(e){e.preventDefault();const l=e.clipboardData;if(!l)return;N(l.getData("text"))}function N(e){var a;const i=[...t.currentModelValue.value],r=e.length>=u.value.length?0:l.index,n=Math.min(r+e.length,u.value.length);for(let l=r;l<n;l++){const a=u.value[l],n=e[l-r];t.isNumericMode.value&&!/^\d*$/.test(n)||(i[l]=n,a.focus())}t.modelValue.value=i,null==(a=u.value[n])||a.focus()}function I(e,l){const a=[...t.currentModelValue.value];if(t.isNumericMode.value){const t=+l;""===l||isNaN(t)?delete a[e]:a[e]=t}else a[e]=l;t.modelValue.value=function(e){let l=e.length-1;for(;l>=0&&""===e[l];)e.pop(),l--;return e}(a)}return i(c,()=>{c.value||q()}),v(()=>{t.onInputElementChange(V.value)}),g(()=>{var e;null==(e=t.inputElements)||e.value.delete(V.value)}),(e,a)=>(n(),r(d(p),{ref_key:"primitiveElement",ref:x,autocapitalize:"none",as:e.as,"as-child":e.asChild,autocomplete:b.value?"one-time-code":"false",type:y.value?"password":"text",inputmode:d(t).isNumericMode.value?"numeric":"text",pattern:d(t).isNumericMode.value?"[0-9]*":void 0,placeholder:d(t).placeholder.value,value:c.value,disabled:h.value,"data-disabled":h.value?"":void 0,"data-complete":d(t).isCompleted.value?"":void 0,"aria-label":`pin input ${e.index+1} of ${u.value.length}`,onInput:a[0]||(a[0]=e=>function(e){var a;const i=e.target;if(((null==(a=e.data)?void 0:a.length)??0)>1)return void N(i.value);if(t.isNumericMode.value&&!/^\d*$/.test(i.value))return void(i.value=i.value.replace(/\D/g,""));i.value=i.value.slice(-1),I(l.index,i.value);const r=u.value[l.index+1];r&&r.focus()}(e)),onKeydown:[m(B,["left","right","up","down","home","end"]),m(z,["backspace"]),m(k,["delete"])],onFocus:_,onBlur:w,onPaste:F},{default:o(()=>[s(e.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),R={slots:{root:"relative inline-flex items-center gap-1.5",base:["rounded-md border-0 placeholder:text-dimmed text-center focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"]},variants:{size:{xs:{base:"size-6 text-xs"},sm:{base:"size-7 text-xs"},md:{base:"size-8 text-sm"},lg:{base:"size-9 text-sm"},xl:{base:"size-10 text-base"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},highlight:{true:""}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},T={__name:"PinInput",props:{as:{type:null,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},length:{type:[Number,String],required:!1,default:5},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultValue:{type:Array,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},mask:{type:Boolean,required:!1},modelValue:{type:null,required:!1},name:{type:String,required:!1},otp:{type:Boolean,required:!1},placeholder:{type:String,required:!1},required:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"}},emits:["update:modelValue","complete","change","blur"],setup(e,{expose:l,emit:i}){const s=e,u=i,p=h(),g=I(b(s,"defaultValue","disabled","id","mask","modelValue","name","otp","required","type"),u),{emitFormInput:m,emitFormFocus:f,emitFormChange:_,emitFormBlur:w,size:F,color:N,id:M,name:S,highlight:A,disabled:E,ariaAttrs:C}=y(s),D=a(()=>{var e;return x({extend:x(R),...(null==(e=p.ui)?void 0:e.pinInput)||{}})({color:N.value,variant:s.variant,size:F.value,highlight:A.value})}),$=t([]),T=t(!1);function K(e){const l=new Event("change",{target:{value:e}});u("change",l),_()}function U(e){e.relatedTarget&&!T.value||(u("blur",e),w())}return v(()=>{setTimeout(()=>{var e,l;s.autofocus&&(null==(l=null==(e=$.value[0])?void 0:e.$el)||l.focus())},s.autofocusDelay)}),l({inputsRef:$}),(l,a)=>{var t;return n(),r(d(j),c({...d(g),...d(C)},{id:d(M),name:d(S),placeholder:e.placeholder,class:D.value.root({class:[null==(t=s.ui)?void 0:t.root,s.class]}),"onUpdate:modelValue":a[0]||(a[0]=e=>d(m)()),onComplete:K}),{default:o(()=>[(n(!0),V(q,null,B(d(z)(s.length),(e,l)=>{var a;return n(),r(d(P),{key:e,ref_for:!0,ref:e=>$.value[l]=e,index:l,class:k(D.value.base({class:null==(a=s.ui)?void 0:a.base})),disabled:d(E),onBlur:U,onFocus:d(f)},null,8,["index","class","disabled","onFocus"])}),128))]),_:1},16,["id","name","placeholder","class"])}}},K=e({__name:"PinInputField",props:{modelValue:{type:Array,default:()=>[]},length:{type:Number,default:4},disabled:{type:Boolean,default:!1},type:{type:String,default:"number"},mask:{type:Boolean,default:!1},placeholder:{type:String,default:"â—‹"},otp:{type:Boolean,default:!0},color:{type:String,default:"neutral"},highlight:{type:Boolean,default:!1},variant:{type:String,default:"outline"},size:{type:String,default:"lg"}},emits:["update:modelValue"],setup(e,{emit:l}){const a=l,i=e,r=t(i.modelValue);return(e,l)=>{const t=T;return n(),V("div",null,[u(t,{modelValue:d(r),"onUpdate:modelValue":[l[0]||(l[0]=e=>_(r)?r.value=e:null),l[1]||(l[1]=e=>a("update:modelValue",e))],length:i.length,disabled:i.disabled,type:i.type,mask:i.mask,placeholder:i.placeholder,otp:i.otp,color:i.color,highlight:i.highlight,variant:i.variant,size:i.size},null,8,["modelValue","length","disabled","type","mask","placeholder","otp","color","highlight","variant","size"])])}}});export{K as _};
