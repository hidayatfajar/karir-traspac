import{aB as e,U as a,aw as s}from"./Cv-82GME.js";const l=e.create({baseURL:"https://lms-sttal.dev-app.online/s22-api/lms-sttal-api/index.php",timeout:6e5});l.interceptors.request.use(function(e){const l=a(),{loading:n,user:r}=s(l);return n.value=!0,r.value&&r.value.token&&e.headers.set("TTOKEN",r.value.token),e}),l.interceptors.response.use(e=>{const l=a();if(l){const{loading:e}=s(l);setTimeout(()=>{e.value=!1},1e3)}return e},async e=>{var l,n,r,o,t,d,u,i,p,c,v,k,m;const g=a();if(g){const{loading:e}=s(g);e.value=!1}if(!(null==e?void 0:e.response))return e.response={data:{code:500,message:"Server dalam perbaikan.",data:null,errors:null}},Promise.reject(e);if(!(null==(n=null==(l=null==e?void 0:e.message)?void 0:l.toLowerCase())?void 0:n.includes("network"))){switch(parseInt((null==e?void 0:e.response)&&(null==(o=null==e?void 0:e.response)?void 0:o.status))){case 401:e.response.data={...null==(t=e.response)?void 0:t.data,code:401,message:"Anda belum login atau token sudah kadaluarsa, silahkan login terlebih dahulu.",data:null,errors:null},null==(d=a())||d.logout();break;case 403:e.response.data={...null==(u=e.response)?void 0:u.data,code:403,message:"Anda tidak memiliki akses ke halaman ini.",data:null,errors:null},$router.push({path:"/no-access"});break;case 502:e.response.data={...null==(i=e.response)?void 0:i.data,code:502,message:"Aplikasi sedang tidak terkoneksi ke server.",data:null,errors:null};break;case 413:e.response.data={...null==(p=e.response)?void 0:p.data,code:413,message:"File gagal diunggah.",data:null,errors:null};break;case 500:e.response.data={...null==(c=e.response)?void 0:c.data,code:500,message:((null==(v=null==e?void 0:e.response)?void 0:v.error)??(null==(m=null==(k=null==e?void 0:e.response)?void 0:k.data)?void 0:m.message))||"Server dalam perbaikan.",data:null,errors:null}}return Promise.reject(e)}e.response.data={...null==(r=e.response)?void 0:r.data,code:503,message:"Koneksi bermasalah, silakan cek koneksi internet.",data:null,errors:null}});export{l as r};
