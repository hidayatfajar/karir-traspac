import{r as e,e as t}from"./qiqiReYZ.js";import{d as n,a5 as r}from"./Cv-82GME.js";function o(o,a){const l=e(!1,300),u=n(null),s=t();function i(){u.value=null,l.value=!1}function c(e,t){const n=e.currentTarget,r={x:e.clientX,y:e.clientY},o=function(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,o,a)){case a:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;n.length>=2;){const e=n[n.length-1],r=n[n.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...o,...function(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}(t.getBoundingClientRect())]);u.value=a,l.value=!0}return r(e=>{if(o.value&&a.value){const t=e=>c(e,a.value),n=e=>c(e,o.value);o.value.addEventListener("pointerleave",t),a.value.addEventListener("pointerleave",n),e(()=>{var e,r;null==(e=o.value)||e.removeEventListener("pointerleave",t),null==(r=a.value)||r.removeEventListener("pointerleave",n)})}}),r(e=>{var t;if(u.value){const n=e=>{var t,n;if(!(u.value&&e.target instanceof HTMLElement))return;const r=e.target,l={x:e.clientX,y:e.clientY},c=(null==(t=o.value)?void 0:t.contains(r))||(null==(n=a.value)?void 0:n.contains(r)),x=!function(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,l=t.length-1;a<t.length;l=a++){const e=t[a].x,u=t[a].y,s=t[l].x,i=t[l].y;u>r!=i>r&&n<(s-e)*(r-u)/(i-u)+e&&(o=!o)}return o}(l,u.value),v=!!r.closest("[data-grace-area-trigger]");c?i():(x||v)&&(i(),s.trigger())};null==(t=o.value)||t.ownerDocument.addEventListener("pointermove",n),e(()=>{var e;return null==(e=o.value)?void 0:e.ownerDocument.removeEventListener("pointermove",n)})}}),{isPointerInTransit:l,onPointerExit:s.on}}export{o as u};
