import{y as e,d as a,c as t,e as l,f as s,g as o,p as n,_ as r,h as d,n as u,j as m,F as i,A as c,k as p,C as y,l as b,i as f,v as j}from"./BUKko-Vg.js";import{_ as V}from"./C7NjuugN.js";import{_ as h}from"./1rt4TJ6M.js";import{$ as v,a as D,b as g}from"./DAka_AnA.js";import"./sFwDOydh.js";import"./DUW1bDgd.js";import"./CvwnDIXq.js";import"./Du--SvPB.js";import"./BjTnBUbK.js";import"./kRIii9yh.js";import"./DI9PQmxm.js";import"./YeO8wRkz.js";import"./C0AU5oYb.js";import"./_F_G4MiH.js";import"./Bp_GLYnZ.js";import"./D4g0MgXo.js";import"./B5O0xESQ.js";import"./BPNxyMcG.js";import"./D3Zd9nM9.js";import"./Cic7byI7.js";import"./D0iqVyHD.js";import"./aV-w2MPu.js";const k={class:"sm:divide-y divide-default"},x={class:"flex items-stretch sm:divide-x divide-default"},_={class:"hidden sm:flex flex-col justify-center"},L={class:"flex items-center justify-center p-2 gap-4"},w=e({__name:"DateRangePicker",props:{modelValue:{},placeholder:{},label:{}},emits:["update:modelValue"],setup(e,{emit:w}){const C=[{label:"Last 7 days",days:7},{label:"Last 14 days",days:14},{label:"Last 30 days",days:30},{label:"Last 3 months",months:3},{label:"Last 6 months",months:6},{label:"Last year",years:1}],S=a(!1),I=e,P=w,R=e=>{if(!e)return null;return(e instanceof Date?e:new Date(e)).toISOString().split("T")[0]},T=e=>{if(!e)return null;const a=e instanceof Date?e:new Date(e);return D(a,v())},U=t({get:()=>({start:T(I.modelValue.start),end:T(I.modelValue.end)}),set:e=>{P("update:modelValue",{start:e.start?R(e.start.toDate(v())):null,end:e.end?R(e.end.toDate(v())):null})}}),F=e=>{if(!e)return"";return(e instanceof Date?e:new Date(e)).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})},A=e=>{if(!I.modelValue.start||!I.modelValue.end)return!1;const a=g(v());let t=a.copy();e.days?t=t.subtract({days:e.days}):e.months?t=t.subtract({months:e.months}):e.years&&(t=t.subtract({years:e.years}));const l=I.modelValue.start?R(new Date(I.modelValue.start)):null,s=I.modelValue.end?R(new Date(I.modelValue.end)):null,o=R(t.toDate(v())),n=R(a.toDate(v()));return l===o&&s===n},G=()=>{P("update:modelValue",{start:null,end:null}),S.value=!1};return(e,a)=>{const t=r,D=V,w=h;return s(),l(w,{open:j(S),"onUpdate:open":a[2]||(a[2]=e=>f(S)?S.value=e:null)},{content:o(()=>[d("div",k,[d("div",x,[d("div",_,[(s(),m(i,null,b(C,(e,a)=>n(t,{key:a,label:e.label,color:"neutral",variant:"ghost",class:u(["rounded-none px-4",[A(e)?"bg-accented":"hover:bg-accented/50"]]),truncate:"",onClick:a=>(e=>{const a=g(v());let t=a.copy();e.days?t=t.subtract({days:e.days}):e.months?t=t.subtract({months:e.months}):e.years&&(t=t.subtract({years:e.years})),P("update:modelValue",{start:R(t.toDate(v())),end:R(a.toDate(v()))})})(e)},null,8,["label","class","onClick"])),64))]),n(D,{modelValue:j(U),"onUpdate:modelValue":a[0]||(a[0]=e=>f(U)?U.value=e:null),class:"p-2","number-of-months":2,range:""},null,8,["modelValue"])]),d("div",L,[n(t,{color:"neutral",variant:"subtle",class:"px-4",label:"Reset",onClick:G}),n(t,{onClick:a[1]||(a[1]=e=>S.value=!1),label:"Simpan"})])])]),default:o(()=>[n(t,{color:"neutral",variant:"subtle",icon:"i-lucide-calendar",class:"!bg-default"},{default:o(()=>[d("span",{class:u(["truncate",!I.placeholder&&!I.label||I.modelValue.end&&I.modelValue.start?"text-toned":"text-dimmed"])},[e.modelValue.start||e.modelValue.end?(s(),m(i,{key:0},[c(y(F(e.modelValue.start))+" ",1),e.modelValue.end?(s(),m(i,{key:0},[c(" - "+y(F(e.modelValue.end)),1)],64)):p("",!0)],64)):(s(),m(i,{key:1},[c(y(I.placeholder||I.label||"Pilih Tanggal"),1)],64))],2)]),_:1})]),_:1},8,["open"])}}});export{w as default};
